# ОПРЦ в Ingress

## Общее описание

Проект предназначен для создания БД в которой будут составлять планы по операциям в ingress.

## Термины и определения

* Ingress -- многопользовательская игра с использованием геопозиционирования;
* агент -- внутриигровое название игрока.
* операция, опрц -- организуемое игроками событие, в рамках которого производятся какие-то совместные действия;
* портал -- точка на карте, элемент игры;
* линк, связь -- установленная кем-то из агентов связь между двумя порталами;
* поле -- замкнутые в треугольник связи одной игровой фракции;
* ключ -- игровой элемент, необходимый для создания связи;

## Информационные сущности

Основных информационных сущностей в разрабатываемой системе две: операция и агент. Дополнительных информационных сущностей больше, их количество зависит от степени детализации системы. Примеры:

* портал;
* план операции;
* команды/экипажи;
* отчёты об операциях и т. д;

Схема сущностей:

![dd]

## Схема БД

![db_scheme]

Схема базы данных постоена в web-приложении [sqldbm.com][sqldbm_com]. На данный момент БД разделена на две схемы:
* `refs` -- справочные данные;
* `oprs` -- данные планирования операций.

Схема не окончательная, планируется дальнейшая доработка, т.к. пока она не отражает всех необходимых сущностей и не решён окончательно способ хранения геоданных.

Таблицы находятся в 3НФ. На первый взгляд, это не так для таблицы `oprs.fields`, но это не так: поле образуют три (и всегда только три) равноправных разных связи (линка), поэтому ограничения 3НФ выполняются.

Контакты агентов и их типы вынесены в отдельные таблицы по двум причинам:
* для большинства кейсов они не требуются;
* список типов контактов является открытым и не может быть предопределён каким-то конечным числом полей.

[dd]: docs/img/domain_diagram.png
[db_scheme]: docs/img/db_scheme.png
[sqldbm_com]: https://app.sqldbm.com/SQLServer/Share/U1SAGwNj-RA4Xlys2C2RFEGFrngIE8md_DYjF4jNYw0
